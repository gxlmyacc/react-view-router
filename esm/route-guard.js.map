{"version":3,"sources":["../src/route-guard.ts"],"names":["hasSymbol","Symbol","for","REACT_FORWARD_REF_TYPE","REACT_LAZY_TYPE","RouteComponentGuards","$$typeof","render","getGuardsComponent","v","useComponentClass","__componentClass","__component","useRouteGuards","component","guards","componentClass","children","ret","props","ref","React","createElement","Object","defineProperty","value","Array","isArray"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;AAGA,IAAMA,SAAS,GAAG,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAAzD;AAEO,IAAMC,sBAAsB,GAAGH,SAAS,GAAGC,MAAM,CAACC,GAAP,CAAW,mBAAX,CAAH,GAAqC,MAA7E;;AACA,IAAME,eAAe,GAAGJ,SAAS,GAAGC,MAAM,CAACC,GAAP,CAAW,YAAX,CAAH,GAA8B,MAA/D;;;IAEMG,oB,GAcX,gCAAc;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AACZ,OAAKC,QAAL,GAAgBH,sBAAhB;AACA,OAAKI,MAAL,GAAc,IAAd;AACD,C;;;;AAKI,SAASC,kBAAT,CAA4BC,CAA5B,EAAgF;AAAA,MAA3BC,iBAA2B,uEAAP,KAAO;AACrF,MAAIA,iBAAiB,IAAID,CAAC,CAACE,gBAA3B,EAA6C,OAAOF,CAAC,CAACE,gBAAT;;AAC7C,SAAOF,CAAC,CAACG,WAAT;AAAsBH,IAAAA,CAAC,GAAGA,CAAC,CAACG,WAAN;AAAtB;;AACA,SAAOH,CAAP;AACD;;AAEM,SAASI,cAAT,CACLC,SADK,EAKL;AAAA,MAHAC,MAGA,uEAH6B,EAG7B;AAAA,MAFAC,cAEA;AAAA,MADAC,QACA;AACA,MAAMC,GAAG,GAAG,IAAIb,oBAAJ,EAAZ;;AACAa,EAAAA,GAAG,CAACX,MAAJ,GAAa,UAAUY,KAAV,EAAsBC,GAAtB,EAAgC;AAC3C,WAAOC,eAAMC,aAAN,CAAoBR,SAApB,oBAAoCK,KAApC;AAA2CC,MAAAA,GAAG,EAAHA;AAA3C,OAAP;AACD,GAFD;;AAGAG,EAAAA,MAAM,CAACC,cAAP,CAAsBN,GAAtB,EAA2B,UAA3B,EAAuC;AAAEO,IAAAA,KAAK,EAAEV;AAAT,GAAvC;AACAQ,EAAAA,MAAM,CAACC,cAAP,CAAsBN,GAAtB,EAA2B,aAA3B,EAA0C;AAAEO,IAAAA,KAAK,EAAEX;AAAT,GAA1C;AAEA,MAAIC,MAAM,CAACC,cAAX,EAA2BA,cAAc,GAAGD,MAAM,CAACC,cAAxB;AAC3B,MAAID,MAAM,CAACE,QAAX,EAAqBA,QAAQ,GAAGF,MAAM,CAACE,QAAlB;;AAErB,MAAIS,KAAK,CAACC,OAAN,CAAcX,cAAd,CAAJ,EAAmC;AACjCC,IAAAA,QAAQ,GAAGD,cAAX;AACAA,IAAAA,cAAc,GAAG,IAAjB;AACD;;AAED,MAAIA,cAAJ,EAAoBO,MAAM,CAACC,cAAP,CAAsBN,GAAtB,EAA2B,kBAA3B,EAA+C;AAAEO,IAAAA,KAAK,EAAET;AAAT,GAA/C;AACpB,MAAIC,QAAJ,EAAcM,MAAM,CAACC,cAAP,CAAsBN,GAAtB,EAA2B,YAA3B,EAAyC;AAAEO,IAAAA,KAAK,EAAER;AAAT,GAAzC;AACd,SAAOC,GAAP;AACD","sourcesContent":["import React from 'react';\nimport { UseRouteGuardsInfo } from './globals';\n\nconst hasSymbol = typeof Symbol === 'function' && Symbol.for;\n\nexport const REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nexport const REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\n\nexport class RouteComponentGuards {\n\n  $$typeof: Symbol | number;\n\n  render: Function | null;\n\n  __guards?: UseRouteGuardsInfo;\n\n  __component?: React.FunctionComponent | React.ComponentClass | RouteComponentGuards;\n\n  __componentClass?: React.FunctionComponent | React.ComponentClass;\n\n  __children?: any;\n\n  constructor() {\n    this.$$typeof = REACT_FORWARD_REF_TYPE;\n    this.render = null;\n  }\n\n}\n\n\nexport function getGuardsComponent(v: RouteComponentGuards, useComponentClass = false) {\n  if (useComponentClass && v.__componentClass) return v.__componentClass;\n  while (v.__component) v = v.__component as RouteComponentGuards;\n  return v;\n}\n\nexport function useRouteGuards(\n  component: React.FunctionComponent | React.ComponentClass,\n  guards: UseRouteGuardsInfo = {},\n  componentClass?: React.FunctionComponent | React.ComponentClass | null,\n  children?: any\n) {\n  const ret = new RouteComponentGuards();\n  ret.render = function (props: any, ref: any) {\n    return React.createElement(component, { ...props, ref });\n  };\n  Object.defineProperty(ret, '__guards', { value: guards });\n  Object.defineProperty(ret, '__component', { value: component });\n\n  if (guards.componentClass) componentClass = guards.componentClass;\n  if (guards.children) children = guards.children;\n\n  if (Array.isArray(componentClass)) {\n    children = componentClass;\n    componentClass = null;\n  }\n\n  if (componentClass) Object.defineProperty(ret, '__componentClass', { value: componentClass });\n  if (children) Object.defineProperty(ret, '__children', { value: children });\n  return ret;\n}\n"],"file":"route-guard.js"}