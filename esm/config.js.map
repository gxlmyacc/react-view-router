{"version":3,"sources":["../src/config.ts"],"names":["encodeReserveRE","encodeReserveReplacer","c","charCodeAt","toString","commaRE","encode","str","encodeURIComponent","replace","decode","decodeURIComponent","_parseQuery","query","res","trim","split","forEach","param","parts","key","shift","val","length","join","undefined","Array","isArray","push","_stringifyQuery","obj","Object","keys","map","result","val2","filter","x","inheritProps","zIndexStart","zIndexStep","parseQuery","stringifyQuery","routeMergeStrategie","parent","child","vm","router","$router","_inherits","_isVueLikeRoot","App","app","$computed","$root","$route","_routeIndex","routeView","getHostRouterView","v","state","_routerDepth","matched","$routeIndex"],"mappings":"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","sourcesContent":["const encodeReserveRE = /[!'()*]/g;\r\nconst encodeReserveReplacer = (c: string) => '%' + c.charCodeAt(0).toString(16);\r\nconst commaRE = /%2C/g;\r\n\r\n// fixed encodeURIComponent which is more conformant to RFC3986:\r\n// - escapes [!'()*]\r\n// - preserve commas\r\nconst encode = (str: string) => encodeURIComponent(str)\r\n  .replace(encodeReserveRE, encodeReserveReplacer)\r\n  .replace(commaRE, ',');\r\n\r\nconst decode = decodeURIComponent;\r\n\r\nfunction _parseQuery(query: string) {\r\n  const res: any = {};\r\n\r\n  query = query.trim().replace(/^(\\?|#|&)/, '');\r\n\r\n  if (!query) {\r\n    return res;\r\n  }\r\n\r\n  query.split('&').forEach((param: string) => {\r\n    const parts: string[] = param.replace(/\\+/g, ' ').split('=');\r\n    const key: string = decode(parts.shift() || '');\r\n    const val: any = parts.length > 0\r\n      ? decode(parts.join('='))\r\n      : null;\r\n\r\n    if (res[key] === undefined) {\r\n      res[key] = val;\r\n    } else if (Array.isArray(res[key])) {\r\n      res[key].push(val);\r\n    } else {\r\n      res[key] = [res[key], val];\r\n    }\r\n  });\r\n\r\n  return res;\r\n}\r\n\r\nfunction _stringifyQuery(obj: { [key: string]: any }) {\r\n  const res = obj ? Object.keys(obj).map((key: string) => {\r\n    const val: any = obj[key];\r\n\r\n    if (val === undefined) {\r\n      return '';\r\n    }\r\n\r\n    if (val === null) {\r\n      return encode(key);\r\n    }\r\n\r\n    if (Array.isArray(val)) {\r\n      const result: string[] = [];\r\n      val.forEach(val2 => {\r\n        if (val2 === undefined) {\r\n          return;\r\n        }\r\n        if (val2 === null) {\r\n          result.push(encode(key));\r\n        } else {\r\n          result.push(encode(key) + '=' + encode(val2));\r\n        }\r\n      });\r\n      return result.join('&');\r\n    }\r\n\r\n    return encode(key) + '=' + encode(val);\r\n  }).filter((x: string) => x.length > 0).join('&') : null;\r\n  return res ? `?${res}` : '';\r\n}\r\n\r\nexport default {\r\n  _parseQuery,\r\n  _stringifyQuery,\r\n\r\n  inheritProps: true,\r\n\r\n  zIndexStart: 0,\r\n  zIndexStep: 1,\r\n\r\n  get parseQuery() {\r\n    return this._parseQuery;\r\n  },\r\n  get stringifyQuery() {\r\n    return this._stringifyQuery;\r\n  },\r\n\r\n  routeMergeStrategie(parent: any, child: any, vm: any) {\r\n    const router = vm.$router || vm._inherits.$router;\r\n    if (vm._isVueLikeRoot) {\r\n      if (router) {\r\n        if (!router.App || (vm instanceof router.App)) router.app = vm;\r\n      }\r\n      return parent;\r\n    }\r\n    vm.$computed(vm, '$route', function () {\r\n      return this.$root ? this.$root.$route : null;\r\n    });\r\n    vm.$computed(vm, '$routeIndex', function () {\r\n      if (this._routeIndex !== undefined) return this._routeIndex;\r\n      let routeView = router.getHostRouterView(this, (v: any) => !v._isVueLikeRoot);\r\n      return this._routeIndex = routeView ? routeView.state._routerDepth : -1;\r\n    });\r\n    vm.$computed(vm, '$matchedRoute', function () {\r\n      return (this.$route && this.$route.matched[this.$routeIndex]) || null;\r\n    });\r\n  },\r\n\r\n};\r\n"],"file":"config.js"}