{"version":3,"sources":["../src/router.ts"],"names":["HISTORY_METHS","idSeed","ReactViewRouter","mode","basename","base","options","getUserConfirmation","_handleRouteInterceptor","bind","id","routes","plugins","beforeEachGuards","afterEachGuards","prevRoute","currentRoute","viewRoot","errorCallback","app","getHostRouterView","use","nextTick","manual","start","stop","Object","assign","undefined","_unlisten","history","listen","location","updateRoute","_unblock","block","routeCache","create","length","_history","inheritProps","install","restOptions","config","plugin","indexOf","push","idx","splice","uninstall","event","args","ret","forEach","p","newRet","call","ex","name","message","mr","guardName","bindInstance","componentInstances","routeGuardName","replace","r","guards","toResovle","c","key","cc","__component","cg","__guards","ccg","prototype","ReactVueLike","isMobxFlow","__flows","flow","Array","isArray","mixins","m","ci","map","v","filter","Boolean","route","components","keys","RouteLazy","lazyResovle","interceptors","index","toResolve","nc","_callEvent","lazy","matched","reverse","_getComponentGurads","compare","some","tr","i","fr","path","redirect","containLazy","count","to","from","current","view","fm","_getChangeMatched","_getRouteComponentGurads","fn","beforeRouteLeaveWraper","next","cb","_cb","res","tm","beforeRouteEnterWraper","_pending","completeCallbacks","compGuards","allGuards","afterEnterGuards","pathname","substr","fullPath","callback","flush","_transformLocation","_internalHandleRouteInterceptor","beforeInterceptor","interceptor","nextWrapper","_nexting","f1","nextInterceptor","isBlock","global","console","error","Error","_isLocation","createRoute","afterInterceptors","isInit","isContinue","redirectedFrom","onInit","fallbackView","_getSameMatched","viewInstances","default","props","fallback","_updateResolving","_routetInterceptors","_getBeforeEachGuards","ok","setTimeout","_isMounted","toLast","exact","onAbort","onComplete","_getRouteUpdateGuards","_getAfterEachGuards","Promise","resolve","reject","doComplete","_to","doAbort","isReplace","href","_go","match","url","params","subpath","meta","depth","parent","copyInstance","createMatchedRoute","getMatched","last","search","query","action","isRedirect","parseQuery","_refreshCurrentRoute","_push","_replace","n","go","goBack","goForward","guard","parentRoute","children","findIndex","setState","state","obj","stringifyQuery","App","inherits","$router","$route","observable","inheritMergeStrategies","routeMergeStrategie","router","onRouteChange","newVal","deep"],"mappings":"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","sourcesContent":["import { createHashHistory, createBrowserHistory, createMemoryHistory } from 'history-fix';\nimport config from './config';\nimport {\n  flatten, isAbsoluteUrl,\n  normalizeRoutes, normalizeLocation, resolveRedirect,\n  matchRoutes, isFunction, isLocation, nextTick, once,\n  afterInterceptors,\n  getHostRouterView,\n} from './util';\nimport routeCache from './route-cache';\nimport { RouteLazy, hasRouteLazy, hasMatchedRouteLazy } from './route-lazy';\nimport { getGuardsComponent } from './route-guard';\nimport { RouterViewComponent as RouterView } from './router-view';\nimport {\n  ReactVueRouterMode, ReactVueRouterOptions, ConfigRouteArray,\n  RouteBeforeGuardFn, RouteAfterGuardFn, RouteNextFn, RouteHistoryLocation,\n  RouteGuardInterceptor, RouteEvent, RouteChildrenFn,\n  matchPathResult, ConfigRoute, RouteErrorCallback,\n  ReactViewRoutePlugin, Route, MatchedRoute, lazyResovleFn, RouteBindInstanceFn\n} from './globals';\n\n\nconst HISTORY_METHS = ['push', 'replace', 'go', 'back', 'goBack', 'forward', 'goForward', 'block'];\n\nlet idSeed = 1;\n\nexport default class ReactViewRouter {\n\n  private id: number;\n\n  options: ReactVueRouterOptions;\n\n  mode: ReactVueRouterMode;\n\n  basename: string;\n\n  routes: ConfigRouteArray;\n\n  plugins: ReactViewRoutePlugin[];\n\n  beforeEachGuards: RouteBeforeGuardFn[];\n\n  afterEachGuards: RouteAfterGuardFn[];\n\n  prevRoute: Route | null;\n\n  currentRoute: Route | null;\n\n  viewRoot: RouterView | null;\n\n  errorCallback: RouteErrorCallback | null;\n\n  app: any; // React.ComponentClass | null;\n\n  getHostRouterView: typeof getHostRouterView;\n\n  nextTick: typeof nextTick;\n\n  _history?: any;\n\n  _unlisten?: () => void;\n\n  __unblock?: () => void;\n\n  [key: string]: any;\n\n  constructor({ mode = 'hash', basename = '', base = '', ...options  }: ReactVueRouterOptions = {}) {\n    options.getUserConfirmation = this._handleRouteInterceptor.bind(this);\n\n    this.id = idSeed++;\n    this.options = options;\n    this.mode = mode;\n    this.basename = basename || base;\n    this.routes = [];\n    this.plugins = [];\n    this.beforeEachGuards = [];\n    this.afterEachGuards = [];\n    this.prevRoute = null;\n    this.currentRoute = null;\n    this.viewRoot = null;\n    this.errorCallback = null;\n    this.app = null;\n    this.getHostRouterView = getHostRouterView;\n    // this.states = [];\n    // this.stateOrigin = this.history.length;\n\n    this.use(options);\n    this.nextTick = nextTick.bind(this);\n\n    if (!options.manual) this.start();\n  }\n\n  get history() {\n    if (this._history) return this._history;\n\n    const options = this.options;\n    if (options.history) {\n      if (options.history instanceof ReactViewRouter) {\n        this._history = options.history.history;\n        this.mode = options.history.mode;\n      } else this._history = options.history;\n    } else {\n      switch (this.mode) {\n        case 'browser':\n        case 'history':\n          this._history = createBrowserHistory(this.options);\n          break;\n        case 'memory':\n        case 'abstract':\n          this._history = createMemoryHistory(this.options);\n          break;\n        default: this._history = createHashHistory(this.options);\n      }\n    }\n    Object.keys(this._history).forEach(key => !~HISTORY_METHS.indexOf(key) && (this[key] = this._history[key]));\n    HISTORY_METHS.forEach(key => this[key] && (this[key] = this[key].bind(this)));\n\n    return this._history;\n  }\n\n  start({ mode, basename, base, ...options  }: ReactVueRouterOptions = {}) {\n    this.stop();\n\n    Object.assign(this.options, options);\n    if (basename !== undefined) this.basename = basename;\n    if (base !== undefined) this.basename = base;\n    if (mode !== undefined) this.mode = mode;\n\n    this._unlisten = this.history.listen((location: any) => this.updateRoute(location));\n    this._unblock = this.history.block((location: any) => routeCache.create(location, this.id));\n\n    if (this.routes.length) this.updateRoute(this.history.location);\n  }\n\n  stop() {\n    if (this._unlisten) this._unlisten();\n    if (this._unblock) this._unblock();\n    this._history = null;\n    this.app = null;\n  }\n\n  use({ routes, inheritProps, install, ...restOptions }: ReactVueRouterOptions) {\n    if (routes) {\n      this.routes = routes ? normalizeRoutes(routes) : [];\n      this._history && this.updateRoute(this._history.location);\n    }\n\n    if (inheritProps !== undefined) config.inheritProps = inheritProps;\n\n    Object.assign(config, restOptions);\n\n    if (install) this.install = install.bind(this);\n  }\n\n  plugin(plugin: ReactViewRoutePlugin) {\n    if (~this.plugins.indexOf(plugin)) return;\n    this.plugins.push(plugin);\n    if (plugin.install) plugin.install(this);\n    return function () {\n      const idx = this.plugins.indexOf(plugin);\n      if (~idx) {\n        this.plugins.splice(idx, 1);\n        if (plugin.uninstall) plugin.uninstall(this);\n      }\n    };\n  }\n\n  _callEvent(event: string, ...args: any[]) {\n    let plugin: ReactViewRoutePlugin | null = null;\n    try {\n      let ret: any;\n      this.plugins.forEach(p => {\n        plugin = p;\n        const newRet = p[event] && p[event].call(p, ...args, ret);\n        if (newRet !== undefined) ret = newRet;\n      });\n      return ret;\n    } catch (ex) {\n      if (plugin && (plugin as ReactViewRoutePlugin).name && ex && ex.message) {\n        ex.message = `[${(plugin as ReactViewRoutePlugin).name}:${event}]${ex.message}`;\n      }\n      throw ex;\n    }\n  }\n\n  _getComponentGurads(mr: MatchedRoute, guardName: string,\n    bindInstance: boolean | RouteBindInstanceFn = true) {\n    let ret = [];\n\n    const componentInstances = mr.componentInstances;\n\n    // route config\n    const routeGuardName = guardName.replace('Route', '');\n    const r = mr.config;\n\n    const guards = r[routeGuardName];\n    if (guards) ret.push(guards);\n\n    const toResovle = (c: any, key: string) => {\n      let ret = [];\n      const cc = c.__component ? getGuardsComponent(c, true) : c;\n\n      const cg = c.__guards && c.__guards[guardName];\n      if (cg) ret.push(cg);\n\n      let ccg = cc && cc.prototype && cc.prototype[guardName];\n      if (ccg) {\n        if (this.ReactVueLike && !ccg.isMobxFlow && cc.__flows && ~cc.__flows.indexOf(guardName)) ccg = this.ReactVueLike.flow(ccg);\n        ret.push(ccg);\n      }\n      if (cc && this.ReactVueLike && cc.prototype instanceof this.ReactVueLike && Array.isArray(cc.mixins)) {\n        cc.mixins.forEach((m: any) => {\n          let ccg = m[guardName] || (m.prototype && m.prototype[guardName]);\n          if (!ccg) return;\n          if (!ccg.isMobxFlow && m.__flows && ~m.__flows.indexOf(guardName)) ccg = this.ReactVueLike.flow(ccg);\n          ret.push(ccg);\n        });\n      }\n\n      const ci = componentInstances[key];\n      if (bindInstance) {\n        if (isFunction(bindInstance)) ret = ret.map(v => bindInstance(v, key, ci, r)).filter(Boolean);\n        else if (ci) ret = ret.map(v => v.bind(ci));\n      }\n      ret = flatten(ret);\n      ret.forEach(v => v.route = r);\n      return ret;\n    };\n\n    // route component\n    r.components && Object.keys(r.components).forEach(key => {\n      const c = r.components[key];\n      if (!c) return;\n\n      if (c instanceof RouteLazy) {\n        const lazyResovle: lazyResovleFn = async (interceptors: any[], index: number) => {\n          let nc = await c.toResolve(r, key);\n          nc = this._callEvent('onResolveComponent', nc, r) || nc;\n          let ret = toResovle(nc, key);\n          interceptors.splice(index, 1, ...ret);\n          return interceptors[index];\n        };\n        lazyResovle.lazy = true;\n        lazyResovle.route = r;\n        ret.push(lazyResovle);\n      } else ret.push(...toResovle(c, key));\n    });\n\n    return ret;\n  }\n\n  _getRouteComponentGurads(\n    matched: MatchedRoute[],\n    guardName: string,\n    reverse: boolean = false,\n    bindInstance: boolean | RouteBindInstanceFn = true\n  ) {\n    let ret: RouteGuardInterceptor[] = [];\n    if (reverse) matched = matched.reverse();\n    matched.forEach(r => {\n      let guards = this._getComponentGurads(r, guardName, bindInstance);\n      ret.push(...guards);\n    });\n    return ret;\n  }\n\n  _getSameMatched(route: Route | null, compare?: Route) {\n    const ret: MatchedRoute[] = [];\n    if (!compare) return [];\n    route && route.matched.some((tr, i) => {\n      let fr = compare.matched[i];\n      if (tr.path !== fr.path) return true;\n      ret.push(tr);\n    });\n    return ret.filter(r => !r.redirect);\n  }\n\n  _getChangeMatched(route: Route, compare?: Route | null, options: {\n    containLazy?: boolean\n    count?: number\n  } = {}) {\n    const ret: MatchedRoute[] = [];\n    if (!compare) return [...route.matched];\n    let start = false;\n    route && route.matched.some((tr, i) => {\n      let fr = compare.matched[i];\n      if (!start) {\n        start = (options.containLazy && hasRouteLazy(tr)) || !fr || fr.path !== tr.path;\n        if (!start) return;\n      }\n      ret.push(tr);\n      return typeof options.count === 'number' && ret.length === options.count;\n    });\n    return ret.filter(r => !r.redirect);\n  }\n\n  _getBeforeEachGuards(to: Route, from: Route | null, current: Route | null = null) {\n    const ret = [...this.beforeEachGuards];\n    const view = this;\n    if (from) {\n      const fm = this._getChangeMatched(from, to)\n        .filter(r => Object.keys(r.componentInstances).some(key => r.componentInstances[key]));\n      ret.push(...(this._getRouteComponentGurads(\n        fm,\n        'beforeRouteLeave',\n        true,\n        (fn, name, ci, r) => (function beforeRouteLeaveWraper(to: Route, from: Route | null, next: RouteNextFn) {\n          return (fn as RouteBeforeGuardFn)(to, from, (cb: (...args: any) => any, ...args: any[]) => {\n            if (isFunction(cb)) {\n              const _cb = cb;\n              cb = (...as) => {\n                const res = _cb(...as);\n                view._callEvent('onRouteLeaveNext', r, ci, res);\n                return res;\n              };\n            }\n            return next(cb, ...args);\n          }, r);\n        })\n      ) as RouteBeforeGuardFn[]));\n    }\n    if (to) {\n      let tm = this._getChangeMatched(to, from, { containLazy: true });\n      tm.forEach(r => {\n        let guards = this._getComponentGurads(\n          r,\n          'beforeRouteEnter',\n          (fn, name) => (function beforeRouteEnterWraper(to: Route, from: Route | null, next: RouteNextFn) {\n            return (fn as RouteBeforeGuardFn)(to, from, (cb, ...args) => {\n              if (isFunction(cb)) {\n                const _cb = cb;\n                r.config._pending.completeCallbacks[name] = ci => {\n                  const res = _cb(ci);\n                  view._callEvent('onRouteEnterNext', r, ci, res);\n                  return res;\n                };\n                cb = undefined;\n              }\n              return next(cb, ...args);\n            }, r.config);\n          })\n        );\n        ret.push(...guards);\n      });\n\n      if (from !== current) tm = this._getChangeMatched(to, current);\n      tm.forEach(r => {\n        const compGuards: Partial<any> = {};\n        const allGuards = this._getComponentGurads(\n          r,\n          'afterRouteEnter',\n          (fn, name) => {\n            if (!compGuards[name]) compGuards[name] = [];\n            compGuards[name].push(function () {\n              return (fn as RouteAfterGuardFn).call(this, to, current, r.config);\n            });\n            return null;\n          }\n        );\n        Object.keys(compGuards).forEach(name => compGuards[name].push(...allGuards));\n        r.config._pending.afterEnterGuards = compGuards;\n      });\n    }\n    return flatten(ret);\n  }\n\n  _getRouteUpdateGuards(to: Route, from: Route | null) {\n    const ret = [];\n    const fm: MatchedRoute[] = [];\n    to && to.matched.some((tr, i) => {\n      let fr = from && from.matched[i];\n      if (!fr || fr.path !== tr.path) return true;\n      fm.push(fr);\n    });\n    ret.push(...this._getRouteComponentGurads(fm.filter(r => !r.redirect), 'beforeRouteUpdate', true));\n    return ret;\n  }\n\n  _getAfterEachGuards(to: Route, from: Route | null) {\n    const ret = [];\n    if (from) {\n      const fm = this._getChangeMatched(from, to).filter(r => Object.keys(r.componentInstances)\n        .some(key => r.componentInstances[key]));\n      ret.push(...this._getRouteComponentGurads(fm, 'afterRouteLeave', true));\n    }\n    ret.push(...this.afterEachGuards);\n    return flatten(ret);\n  }\n\n  _transformLocation(location: RouteHistoryLocation) {\n    if (!location) return location;\n    if (this.basename) {\n      if (location.pathname.indexOf(this.basename) !== 0) return null;\n      location = { ...location };\n      location.pathname = location.pathname.substr(this.basename.length) || '/';\n      if (location.fullPath) location.fullPath = location.fullPath.substr(this.basename.length) || '/';\n      if (location.path !== undefined) location.path = location.pathname;\n    }\n    return location;\n  }\n\n  async _handleRouteInterceptor(\n    location: null | string | RouteHistoryLocation,\n    callback: (ok: boolean, route?: Route) => void,\n    ...args: any[]\n  ) {\n    if (typeof location === 'string') location = routeCache.flush(location);\n    location = this._transformLocation(location as RouteHistoryLocation);\n    if (!location) return callback(true);\n    this._callEvent('onRouteing', true);\n    try {\n      return await this._internalHandleRouteInterceptor(location, callback, ...args);\n    } finally {\n      this._callEvent('onRouteing', false);\n    }\n  }\n\n  async _routetInterceptors(\n    interceptors: RouteGuardInterceptor[],\n    to: Route,\n    from: Route | null,\n    next?: RouteNextFn\n  ) {\n    const isBlock = (v: any, interceptor: lazyResovleFn) => {\n      let _isLocation = typeof v === 'string' || isLocation(v);\n      if (_isLocation && interceptor) {\n        v = this.createRoute(normalizeLocation(v, interceptor.route));\n        if (v.fullPath === to.fullPath) {\n          v = undefined;\n          _isLocation = false;\n        }\n      }\n      return !this._history || v === false || _isLocation || v instanceof Error;\n    };\n\n    async function beforeInterceptor(\n      interceptor: RouteBeforeGuardFn | lazyResovleFn,\n      index: number,\n      to: Route,\n      from: Route | null,\n      next: RouteNextFn\n    ) {\n      while (interceptor && (interceptor as lazyResovleFn).lazy) {\n        interceptor = await (interceptor as lazyResovleFn)(interceptors, index);\n      }\n      if (!interceptor) return next();\n\n      const nextWrapper: RouteNextFn = this._nexting = once(async f1 => {\n        let nextInterceptor = interceptors[++index] as RouteBeforeGuardFn;\n        if (isBlock.call(this, f1, interceptor as lazyResovleFn)) return next(f1);\n        if (f1 === true) f1 = undefined;\n        if (!nextInterceptor) return next((res: any) => isFunction(f1) && f1(res));\n        try {\n          return await beforeInterceptor.call(this,\n            nextInterceptor,\n            index,\n            to,\n            from,\n            res => {\n              let ret = next(res);\n              if ((interceptor as RouteBeforeGuardFn).global) isFunction(f1) && f1(res);\n              return ret;\n            });\n        } catch (ex) {\n          console.error(ex);\n          next(typeof ex === 'string' ? new Error(ex) : ex);\n        }\n      });\n      return await (interceptor as RouteBeforeGuardFn)(to, from, nextWrapper, (interceptor as lazyResovleFn).route);\n    }\n    if (next) await beforeInterceptor.call(this, interceptors[0] as RouteBeforeGuardFn, 0, to, from, next);\n    else afterInterceptors.call(this, interceptors, to, from);\n  }\n\n  async _internalHandleRouteInterceptor(\n    location: RouteHistoryLocation,\n    callback: (ok: boolean, route?: Route) => void,\n    isInit = false\n  ) {\n    let isContinue = false;\n    try {\n      const to = this.createRoute(location);\n      const from = isInit ? null : to.redirectedFrom || this.currentRoute;\n      const current = this.currentRoute;\n\n      if (to && from && to.fullPath === from.fullPath) {\n        callback(true);\n        if (to.onInit) to.onInit(Boolean(to), to);\n        return;\n      }\n\n      let fallbackView: RouterView | null = null;\n      if (hasMatchedRouteLazy(to.matched)) {\n        fallbackView = this.viewRoot;\n        this._getSameMatched(isInit ? null : this.currentRoute, to).reverse().some(m => {\n          if (!m.viewInstances.default || !m.viewInstances.default.props.fallback) return;\n          return fallbackView = m.viewInstances.default;\n        });\n      }\n\n      fallbackView && fallbackView._updateResolving(true);\n      this._routetInterceptors(this._getBeforeEachGuards(to, from, current), to, from, ok => {\n        this._nexting = null;\n        fallbackView && setTimeout(() => fallbackView && fallbackView._isMounted && fallbackView._updateResolving(false), 0);\n\n        if (ok && typeof ok === 'string') ok = { path: ok };\n        isContinue = Boolean(ok === undefined || (ok && !(ok instanceof Error) && !isLocation(ok)));\n\n        const toLast = to.matched[to.matched.length - 1];\n        if (isContinue && toLast && toLast.config.exact && toLast.redirect) {\n          ok = resolveRedirect(toLast.redirect, toLast, to);\n          if (ok) isContinue = false;\n        }\n\n        callback(isContinue, to);\n\n        if (!isContinue) {\n          if (isLocation(ok)) {\n            if (to.onAbort) ok.onAbort = to.onAbort;\n            if (to.onComplete) ok.onComplete = to.onComplete;\n            return this.redirect(ok, undefined, undefined, to.onInit || (isInit ? callback : null), to);\n          }\n          if (to && isFunction(to.onAbort)) to.onAbort(ok, to);\n          if (ok instanceof Error) this.errorCallback && this.errorCallback(ok);\n          return;\n        }\n\n        if (to.onInit) to.onInit(Boolean(to), to);\n\n        this.nextTick(() => {\n          if (isFunction(ok)) ok = ok(to);\n          if (!isInit && (!current || current.fullPath !== to.fullPath)) {\n            this._routetInterceptors(this._getRouteUpdateGuards(to, current), to, current);\n          }\n          if (to && isFunction(to.onComplete)) to.onComplete(ok, to);\n          this._routetInterceptors(this._getAfterEachGuards(to, current), to, current);\n        });\n      });\n    } catch (ex) {\n      console.error(ex);\n      if (!isContinue) callback(isContinue);\n    }\n  }\n\n  _go(\n    to: string | RouteHistoryLocation | Route,\n    onComplete?: RouteEvent,\n    onAbort?: RouteEvent,\n    onInit?: RouteEvent | null,\n    replace?: boolean\n  ) {\n    return new Promise((resolve, reject) => {\n      to = normalizeLocation(to, this.currentRoute, false, this.basename);\n      function doComplete(res: any, _to: Route) {\n        onComplete && onComplete(res, _to);\n        resolve(res);\n      }\n      function doAbort(res: any, _to: Route) {\n        onAbort && onAbort(res, _to);\n        reject(res);\n      }\n      if (isFunction(onComplete)) to.onComplete = once(doComplete);\n      if (isFunction(onAbort)) to.onAbort = once(doAbort);\n      if (onInit) to.onInit = onInit;\n      if (this._nexting) return this._nexting(to);\n      if (replace) {\n        to.isReplace = true;\n        if (to.fullPath && isAbsoluteUrl(to.fullPath)) location.replace(to.fullPath);\n        else this.history.replace(to);\n      } else {\n        if (to.fullPath && isAbsoluteUrl(to.fullPath)) location.href = to.fullPath;\n        else this.history.push(to);\n      }\n    });\n  }\n\n  _replace(\n    to: string | RouteHistoryLocation | Route,\n    onComplete?: RouteEvent,\n    onAbort?: RouteEvent,\n    onInit?: RouteEvent | null\n  ) {\n    return this._go(to, onComplete, onAbort, onInit, true);\n  }\n\n  _push(\n    to: string | RouteHistoryLocation | Route,\n    onComplete?: RouteEvent,\n    onAbort?: RouteEvent,\n    onInit?: RouteEvent | null\n  ) {\n    return this._go(to, onComplete, onAbort, onInit);\n  }\n\n  createMatchedRoute(route: ConfigRoute, match?: matchPathResult | null): MatchedRoute {\n    let { url, params } = match || { url: '', params: {} };\n    let { path, subpath, meta, redirect, depth } = route;\n    return {\n      url,\n      path,\n      subpath,\n      depth,\n      meta,\n      redirect,\n      params,\n      componentInstances: {},\n      viewInstances: {},\n      config: route\n    };\n  }\n\n  getMatched(to: Route, from: Route | null, parent: ConfigRoute | null = null) {\n    if (!from) from = this.currentRoute;\n    function copyInstance(to: MatchedRoute, from: MatchedRoute | null) {\n      if (!from) return;\n      if (from.componentInstances) to.componentInstances = from.componentInstances;\n      if (from.viewInstances) to.viewInstances = from.viewInstances;\n    }\n    let matched = matchRoutes(this.routes, to, parent);\n    return matched.map(({ route, match }, i) => {\n      let ret = this.createMatchedRoute(route, match);\n      if (from) {\n        const fr = from.matched[i];\n        const tr = matched[i];\n        if (fr && tr && fr.path === tr.route.path) copyInstance(ret, fr);\n      }\n      return ret;\n    });\n  }\n\n  getMatchedComponents(to: Route, from: Route | null, parent: ConfigRoute | null) {\n    return this.getMatched(to, from, parent).map(r => r.componentInstances.default).filter(Boolean);\n  }\n\n  getMatchedViews(to: Route, from: Route | null, parent: ConfigRoute | null) {\n    return this.getMatched(to, from, parent).map(r => r.viewInstances.default).filter(Boolean);\n  }\n\n  createRoute(to: RouteHistoryLocation | Route, from: Route | null = null): Route {\n    if (!from) from = (to as Route).redirectedFrom || this.currentRoute;\n    const matched = this.getMatched(to as Route, from);\n    const last = matched.length ? matched[matched.length - 1] : { url: '', params: {}, meta: {} };\n\n    const { search = '', query, path = '', onAbort, onComplete } = to;\n    const ret: Route = {\n      action: this.history.action,\n      url: last.url,\n      basename: this.basename,\n      path,\n      search,\n      fullPath: `${path}${search}`,\n      isRedirect: Boolean(to.isRedirect),\n      isReplace: Boolean(to.isReplace),\n      query: query || (search ? config.parseQuery(to.search.substr(1)) : {}),\n      params: last.params || {},\n      matched,\n      meta: last.meta || {},\n      onAbort,\n      onComplete\n    };\n    if (to.isRedirect && from) {\n      ret.redirectedFrom = from;\n      if (!ret.onAbort && from.onAbort) ret.onAbort = from.onAbort;\n      if (!ret.onComplete && from.onComplete) ret.onComplete = from.onComplete;\n      if (!ret.onInit && to.onInit) ret.onInit = to.onInit;\n    }\n    return ret;\n  }\n\n  updateRoute(location: RouteHistoryLocation | null) {\n    location = location && this._transformLocation(location);\n    if (!location) return;\n\n    this.prevRoute = this.currentRoute;\n    this.currentRoute = this.createRoute(location, this.prevRoute);\n\n    // const statesLen = this.states.length + this.stateOrigin;\n    // const historyLen = this.history.length - this.stateOrigin;\n    // if (this.history.action === 'POP') {\n    //   this.currentRoute.state = this.states[historyLen];\n    //   if (statesLen > this.history.length) this.states.splice(historyLen);\n    // } else {\n    //   if (statesLen > this.history.length) this.states.splice(historyLen - 1);\n    //   this.states.push(this.currentRoute.state);\n    // }\n\n    let tm = this.prevRoute && this._getChangeMatched(this.prevRoute, this.currentRoute, { count: 1 })[0];\n    if (tm) {\n      Object.keys(tm.viewInstances).forEach(key => tm && tm.viewInstances[key]._refreshCurrentRoute());\n    } else if (this.viewRoot) this.viewRoot._refreshCurrentRoute();\n\n    this._callEvent('onRouteChange', this.currentRoute, this);\n  }\n\n  push(\n    to: string | RouteHistoryLocation | Route,\n    onComplete?: RouteEvent,\n    onAbort?: RouteEvent\n  ) {\n    return this._push(to, onComplete, onAbort);\n  }\n\n  replace(\n    to: string | RouteHistoryLocation | Route,\n    onComplete?: RouteEvent,\n    onAbort?: RouteEvent\n  ) {\n    return this._replace(to, onComplete, onAbort);\n  }\n\n  redirect(\n    to: string | RouteHistoryLocation | Route,\n    onComplete?: RouteEvent,\n    onAbort?: RouteEvent,\n    onInit?: RouteEvent | null,\n    from?: Route\n  ) {\n    to = normalizeLocation(to);\n    to.isRedirect = true;\n    to.redirectedFrom = from || this.currentRoute;\n    return to.isReplace\n      ? this._replace(to, onComplete, onAbort, onInit)\n      : this._push(to, onComplete, onAbort, onInit);\n  }\n\n  go(n: number) {\n    return this.history.go(n);\n  }\n\n  back() {\n    return this.history.goBack();\n  }\n\n  goBack() {\n    return this.history.goBack();\n  }\n\n  forward() {\n    return this.history.goForward();\n  }\n\n  goForward() {\n    return this.history.goForward();\n  }\n\n  beforeEach(guard: RouteBeforeGuardFn) {\n    if (!guard || typeof guard !== 'function') return;\n    let i = this.beforeEachGuards.indexOf(guard);\n    if (~i) this.beforeEachGuards.splice(i, 1);\n    guard.global = true;\n    this.beforeEachGuards.push(guard);\n  }\n\n  afterEach(guard: RouteAfterGuardFn) {\n    if (!guard || typeof guard !== 'function') return;\n    let i = this.afterEachGuards.indexOf(guard);\n    if (~i) this.afterEachGuards.splice(i, 1);\n    guard.global = true;\n    this.afterEachGuards.push(guard);\n  }\n\n  addRoutes(routes: ConfigRoute[], parentRoute: ConfigRoute, name = 'default') {\n    if (!routes) return;\n    if (!Array.isArray(routes)) routes = [routes];\n    routes = normalizeRoutes(routes, parentRoute);\n    let children = parentRoute ? parentRoute.children : this.routes;\n    if (isFunction(children)) children = (children as RouteChildrenFn)();\n    if (!children) return;\n    routes.forEach(r => {\n      let i = (children as  ConfigRoute[]).findIndex(v => v.path === r.path);\n      if (~i) (children as  ConfigRoute[]).splice(i, 1, r);\n      else (children as  ConfigRoute[]).push(r);\n    });\n    if (parentRoute && parentRoute.viewInstances[name]) parentRoute.viewInstances[name].setState({ routes });\n    else if (this.state.viewRoot) this.state.viewRoot.setState({ routes });\n  }\n\n  parseQuery(query: string) {\n    return config.parseQuery(query);\n  }\n\n  stringifyQuery(obj:  Partial<any>) {\n    return config.stringifyQuery(obj);\n  }\n\n  onError(callback: RouteErrorCallback) {\n    this.errorCallback = callback;\n  }\n\n  install(ReactVueLike: any, { App }: { App: any }) {\n    this.ReactVueLike = ReactVueLike;\n    this.App = App;\n\n    if (!App.inherits) App.inherits = {};\n    App.inherits.$router = this;\n    App.inherits.$route = ReactVueLike.observable(this.currentRoute || {});\n\n    config.inheritProps = false;\n\n    if (!ReactVueLike.config.inheritMergeStrategies.$route) {\n      ReactVueLike.config.inheritMergeStrategies.$route = config.routeMergeStrategie;\n    }\n\n    const router = this;\n    this.plugin({\n      name: 'react-view-router-vue-like-plugin',\n      onRouteChange: ReactVueLike.action(`[react-view-router][${this.id}]onRouteChange`, function (newVal: any) {\n        if (router.app) {\n          router.app.$route = ReactVueLike.observable(newVal, {}, { deep: false });\n        } else {\n          App.inherits.$route = ReactVueLike.observable(newVal, {}, { deep: false });\n          if (App.inherits.$router !== router) App.inherits.$router = router;\n        }\n      })\n    });\n  }\n\n}\n"],"file":"router.js"}